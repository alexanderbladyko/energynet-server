users:
  - id: 1
    name: user_1
  - id: 2
    name: user_2
  - id: 3
    name: user_3
  - id: 4
    name: user_4
aliases:
  - &game_id 99
  - &game_map test_map
game:
  id: *game_id
  map: *game_map
  first_order: [2, 4, 1, 3]
  first_station_order: [
    3, 4, 5, 7, 8, 9,
    13, 10, 12, 11, 15, 16,
    17, 18, 19, 20, 21, 22,
    23, 24, 25, 26, 27, 28,
    29, 30, 31, 32, 33, 33,
    34, 35, 36, 37, 38, 39,
    40, 42, 44, 46, 50, -1
  ]
steps:
  - user: 1
    action: games_new
    data: { id: *game_id, name: game_1, playersLimit: 4, map: *game_map }
    assert:
      game:
        user_ids: [1]
        owner_id: 1
      users:
        1:
          current_lobby_id: *game_id
  - user: 2
    action: game_join
    data: { id: *game_id }
    assert:
      game:
        user_ids: [1, 2]
        owner_id: 1
      users:
        1:
          current_lobby_id: *game_id
        2:
          current_lobby_id: *game_id
  - user: 3
    action: game_join
    data: { id: *game_id }
    assert:
      game:
        user_ids: [1, 2, 3]
        owner_id: 1
      users:
        1:
          current_lobby_id: *game_id
        2:
          current_lobby_id: *game_id
        3:
          current_lobby_id: *game_id
  - user: 4
    action: game_join
    data: { id: *game_id }
    assert:
      game:
        user_ids: [1, 2, 3, 4]
        owner_id: 1
      users:
        1:
          current_lobby_id: *game_id
        2:
          current_lobby_id: *game_id
        3:
          current_lobby_id: *game_id
        4:
          current_lobby_id: *game_id
  - user: 1
    action: game_start
    assert:
      game:
        step: colors
        order: [2, 4, 1, 3]
        stations:
          from: 0
          to: 6
          data: [3.0, 4.0, 5.0, 7.0, 8.0, 9.0]
        resources:
          coal: 18
          oil: 24
          waste: 0
          uranium: 7
        turn: 2
      players:
        1:
          cash: 50
        2:
          cash: 50
        3:
          cash: 50
        4:
          cash: 50
